<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gladney Business Performance - Gladney Center</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='assets/css/bootstrap.min.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='assets/css/lineicons.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='assets/css/materialdesignicons.min.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='assets/css/main.css') }}" />
  <style>
    .top-nav {
      display: flex;
      gap: 20px;
      margin-top: 20px;
    }
    .main-menu {
      list-style: none;
      padding: 0;
      display: flex;
      gap: 20px;
    }
    .menu-item {
      position: relative;
      cursor: pointer;
    }
    .submenu, .nested-submenu {
      display: none;
      position: absolute;
      top: 30px;
      left: 0;
      background: white;
      border: 1px solid #ddd;
      list-style: none;
      padding: 10px;
      min-width: 200px;
      z-index: 1000;
    }
    .menu-item:hover > .submenu,
    .submenu li:hover > .nested-submenu {
      display: block;
    }
    .submenu li {
      position: relative;
    }
    iframe {
      width: 100%;
      height: 80vh;
      border: none;
    }
  </style>
</head>
<body>
  <aside class="sidebar-nav-wrapper">
    <nav class="sidebar-nav">
      <ul>
        <li><a href="{{ url_for('dashboard') }}">Expectant Mother</a></li>
        <li><a href="{{ url_for('business') }}" class="active">Gladney Business Performance</a></li>
        <li><a href="{{ url_for('traffic') }}">Page Traffic Monitor</a></li>
        <li><a href="{{ url_for('alerts') }}">Consolidated</a></li>
        <li><a href="{{ url_for('notification') }}">Notifications</a></li>
      </ul>
    </nav>
  </aside>

  <main class="main-wrapper">
    <header class="header">
      <h4 style="padding: 20px;">Gladney Business Performance Dashboard</h4>
    </header>

    <nav class="top-nav">
      <ul class="main-menu">
        <li class="menu-item">
          Domestic Infant ▼
          <ul class="submenu">
            <li>Adoptive Parents
              <ul class="nested-submenu">
                <li onclick="loadIframe('domestic-adoptive-performance')">Performance</li>
                <li onclick="loadIframe('domestic-adoptive-recent')">Recent Perspective</li>
                <li onclick="loadIframe('domestic-adoptive-process')">Process Timeline</li>
              </ul>
            </li>
            <li>Birth Parents
              <ul class="nested-submenu">
                <li onclick="loadIframe('domestic-birth-performance')">Performance</li>
                <li onclick="loadIframe('domestic-birth-recent')">Recent Perspective</li>
                <li onclick="loadIframe('domestic-birth-breakdown')">Breakdown by State</li>
              </ul>
            </li>
          </ul>
        </li>

        <li class="menu-item">
          New Beginnings ▼
          <ul class="submenu">
            <li onclick="loadIframe('new-adoptive-performance')">Performance</li>
            <li onclick="loadIframe('new-adoptive-recent')">Recent Perspective</li>
            <li onclick="loadIframe('new-adoptive-process')">Process Timeline</li>
          </ul>
        </li>

        <li class="menu-item">
          Drilldown Tables ▼
          <ul class="submenu">
            <li onclick="loadIframe('drilldown-domestic')">Domestic Infant</li>
            <li onclick="loadIframe('drilldown-new')">New Beginnings</li>
          </ul>
        </li>
      </ul>
    </nav>

    <iframe id="dashboard-iframe" src="" allowfullscreen sandbox="allow-scripts allow-same-origin allow-popups"></iframe>
  </main>

  <script>
    const iframeUrls = {
      'domestic-adoptive-performance': 'https://lookerstudio.google.com/embed/reporting/704ba1ac-c624-464f-a9f5-4f0f7ecadbfc/page/p_0cruxnlesd',
      'domestic-adoptive-recent': 'https://lookerstudio.google.com/embed/reporting/704ba1ac-c624-464f-a9f5-4f0f7ecadbfc/page/p_fs1i0mafsd',
      'domestic-adoptive-process': 'https://lookerstudio.google.com/embed/reporting/704ba1ac-c624-464f-a9f5-4f0f7ecadbfc/page/p_jaslgym7rd',
      'domestic-birth-performance': 'https://lookerstudio.google.com/embed/reporting/704ba1ac-c624-464f-a9f5-4f0f7ecadbfc/page/p_n5o80slctd',
      'domestic-birth-recent': 'https://lookerstudio.google.com/embed/reporting/704ba1ac-c624-464f-a9f5-4f0f7ecadbfc/page/p_ox7c5fxitd',
      'domestic-birth-breakdown': 'https://lookerstudio.google.com/embed/reporting/704ba1ac-c624-464f-a9f5-4f0f7ecadbfc/page/p_eoarhx0jtd',
      'new-adoptive-performance': 'https://lookerstudio.google.com/embed/reporting/704ba1ac-c624-464f-a9f5-4f0f7ecadbfc/page/p_pnl8efo3sd',
      'new-adoptive-recent': 'https://lookerstudio.google.com/embed/reporting/704ba1ac-c624-464f-a9f5-4f0f7ecadbfc/page/p_dbfsn7afsd',
      'new-adoptive-process': 'https://lookerstudio.google.com/embed/reporting/704ba1ac-c624-464f-a9f5-4f0f7ecadbfc/page/p_84ojqj4asd',
      'drilldown-domestic': 'https://lookerstudio.google.com/embed/reporting/704ba1ac-c624-464f-a9f5-4f0f7ecadbfc/page/p_g64kpxaatd',
      'drilldown-new': 'https://lookerstudio.google.com/embed/reporting/704ba1ac-c624-464f-a9f5-4f0f7ecadbfc/page/p_q32x6kaatd'
    };

    function loadIframe(tabName) {
      document.getElementById('dashboard-iframe').src = iframeUrls[tabName];
      fetch('/track_action', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ action: 'Click Tab: ' + tabName })
      });
    }
  </script>
</body>
</html>
